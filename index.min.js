!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=!1;document.addEventListener("DOMContentLoaded",(function(){var t,n,r,a;t=new URLSearchParams(window.location.search),n=t.get("name"),r=t.get("email"),a=t.get("calendarNotifications"),n&&(document.querySelector("#name").value=n),r&&(document.querySelector('label[for="email"]').innerHTML+='<p class="email-update">Need to update your email address? Contact us at <a href="mailto:info@adventproject.org">info@adventproject.org</a>.</p>',document.querySelector("#email").value=r,document.querySelector("#email").setAttribute("disabled","")),a&&(document.querySelector("#calendar-notifications").value=a),(n||r)&&(e=!0,document.querySelector('input[type="submit"]').value="Update")})),document.querySelector("#subscribe").addEventListener("submit",(function(t){t.preventDefault(),function(t){var n={};n.name=t.querySelector("#name").value,n.email=t.querySelector("#email").value,t.querySelector("#preferred-name")&&(n.preferredName=t.querySelector("#preferred-name").value),t.querySelector("#calendar-notifications")&&(n.calendarNotifications=t.querySelector("#calendar-notifications").value);var r=document.querySelector("#status");r.setAttribute("class","subscribing"),r.innerText="Subscribing...",fetch(".netlify/functions/subscribe",{body:JSON.stringify(n),method:"POST"}).then((function(e){return e.json()})).then((function(t){console.log(t);var a=t.message,o="";if(1==t.success)a="ðŸŽ‰ Subscribed! Talk to you soon.",o="success";else{var i={sendyText:"Already subscribed",type:"info",text:"You're already subscribed! Thanks for reading."};""===n.calendarNotifications&&1!=e||(i.text="Thanks! Your preferences have been updated."),[i].forEach((function(e){t.message.includes(e.sendyText)&&(a=e.text,o=e.type)}))}r.innerText=a,r.setAttribute("class",o)})).catch((function(e){r.innerText="There was an issue connecting to our system. Sorry! Please email us at info@adventproject.org, and we can update your information.",r.setAttribute("class","error")}))}(t.target)}))}));
//# sourceMappingURL=index.min.js.map